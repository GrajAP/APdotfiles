{
    "layer": "top", // Waybar at top layer
    "position": "left", // Waybar position (top|bottom|left|right)
    //"height": 30, // Waybar height (to be removed for auto height)
    "width": 64, // Waybar width
    "spacing": 7, // Gaps between modules (4px)
    // Choose the order of the modules
    "margin": "0,0,0,0",
    "fixed0center": "false",
    "exclusive": "true",
    "modules-left": [
    	"hyprland/workspaces", 
    	"custom/lock", 
    	"custom/backligth"
    ],
    "modules-center": [
    	//"hyprland/window", 
    	"custom/weather", 
    	"clock"
    ],
    "modules-right": [
    	 "pulseaudio", 
	 "network", 
	 "custom/power"
    ],
    // Modules configuration
     "hyprland/workspaces": {
         "disable-scroll": true,
         "all-outputs": true,
         "warp-on-scroll": false,
         "format":  "{icon}",
         "format-icons": {
             "1": "ï„ ",
             "2": "ï‰¨",
             "3": "ï„¡",
             "4": "ï†¼",
             "5": "ïµ",
             "urgent": "ïª",
             "focused": "ï†’",
             "default": "ï„‘"
         },
         "persistent-workspaces" : {
            "*" : 5
          }

     },

    "hyprland/window": {
    //"format": "ğŸ‘‰ {}",
     "format": " <span font_desc='Iosevka Raven 12'>{:.40}</span> ",
    "rewrite": {
        "(.*) â€” Mozilla Firefox": "ğŸŒ $1",
        "(.*) - Alacritty": "> [$1]"
    },
    "separate-outputs": true
},      
    "clock": {
        "timezone": "Europe/Warsaw",
	"format": "{:%H %M}",
        "tooltip-format": "<big>{:%Y %B}</big>
            <tt><small>{calendar}</small></tt>",
          },
       "custom/backlight": {
	"device": "acpi_video1",
        "format": "{percent}% {icon}",
        "format-icons": ["î", "î“", "î‘", "î", "î", "î", "îŠ", "îˆ", "î›"]
    },
    "network": {
        // "interface": "wlp2*", // (Optional) To force the use of this interface
        "format-wifi": "({signalStrength}%) ï‡«",
        "format-ethernet": "ï–",
        "tooltip-format": "{ifname} via {gwaddr} ï–",
        "format-linked": "{ifname} (No IP) ï–",
        "format-disconnected": "Disconnected âš ",
        "format-alt": "{cidr}"
    },
    "pulseaudio": {
        "scroll-step": 5, // %, can be a float
        "format": "{icon}",
        "format-bluetooth": "{volume}% {icon}ïŠ” {format_source}",
        "format-bluetooth-muted": "ïš© {icon}ïŠ” {format_source}",
        "format-muted": "ïš© ",
        "format-source": "{volume}% ï„°",
        "format-source-muted": "ï„±",
        "format-icons": {
            "headphone": "ï€¥",
            "hands-free": "ï–",
            "headset": "ï–",
            "phone": "ï‚•",
            "portable": "ï‚•",
            "car": "ï†¹",
            "default": ["ï€¦", "ï€§", "ï€¨"]
        },
        "on-click": "killall pavucontrol || pavucontrol"
    },
    "custom/lock" : 
    {
        "tooltip-format" : "false",
        "on-click" : "sh -c '(sleep 0.5s; gtklock)' & disown",
        "format" : "ï€£"
    },
    "custom/power" : 
    {
        "tooltip": "false",
        "on-click": "sh -c '(shutdown)'",
	"format" : "ó°¥"
    },
   }





        modules-left : [
                  "custom/crypto"
                   # "custom/eth"
        ]
        modules-center : [
          "custom/weather"
        ]
        modules-right : ["pulseaudio" "network" "custom/swallow" "custom/power"]
        "hyprland/workspaces" : {
          on-click : "activate"
          format : "{icon}"
          active-only : false
          format-icons : {
            "1" : "ó°ªƒ"
            "2" : "ó°©¾"
            "3" : "ó°ª"
            "4" : "ó°ª‚"
            "5" : "ó°ª‡"
            "6" : "ó°ª†"
            "7" : "ó°©½"
            "8" : "ó°©¿"
            "9" : "ó°ª„"
            "10" : "ó°ªˆ"
          }

        
       
        "custom/weather" : let
          weather : pkgs.stdenv.mkDerivation {
            name : "waybar-wttr"
            buildInputs : [
              (pkgs.python39.withPackages
                (pythonPackages: with pythonPackages [requests pyquery]))
            ]
            unpackPhase : "true"
            installPhase : ''
              mkdir -p $out/bin
              cp ${./weather.py} $out/bin/weather
              chmod +x $out/bin/weather
            ''
          }
        in {
          format : "{}"
          tooltip : true
          interval : 30
          exec : "${weather}/bin/weather"
          return-type : "json"
        }
        "custom/crypto" : let
          crypto : pkgs.stdenv.mkDerivation {
            name : "waybar-wttr"
            buildInputs : [
              (pkgs.python39.withPackages
                (pythonPackages: with pythonPackages [requests]))
            ]
            unpackPhase : "true"
            installPhase : ''
              mkdir -p $out/bin
              cp ${./crypto.py} $out/bin/crypto
              chmod +x $out/bin/crypto
            ''
          }
        in {
          format : "{}"
          tooltip : true
          interval : 30
          exec : "${crypto}/bin/crypto"
          return-type : "json"
        }
        "custom/vpn" : {
          format : "î¬‘ VPN {}"
          tooltip : true
          interval : 1
          exec : "${lib.getBin mullvad-status}/mullvad-status"
        }
        "custom/lock" : {
          "tooltip" : "false"
          "on-click" : "sh -c '(sleep 0.5s gtklock/bin/gtklock)' & disown"
          "format" : "ï€£"
        }
        "custom/swallow" : {
          tooltip : false
          on-click : let
            hyprctl : config.wayland.windowManager.hyprland.package + "/bin/hyprctl"
            notify-send : pkgs.libnotify + "/bin/notify-send"
            rg : pkgs.ripgrep + "/bin/rg"
          in
            pkgs.writeShellScript "waybar-swallow" ''
              #!/bin/sh
              if ${hyprctl} getoption misc:enable_swallow | ${rg}/bin/rg -q "int: 1" then
              	${hyprctl} keyword misc:enable_swallow false >/dev/null &&
              		${notify-send} "Hyprland" "Turned off swallowing"
              else
              	${hyprctl} keyword misc:enable_swallow true >/dev/null &&
              		${notify-send} "Hyprland" "Turned on swallowing"
              fi
            ''
          format : "ó°˜»"
        }
        "custom/power" : {
          "tooltip": "false",
          # TODO
          "format" : "ó°¥"
        },
        clock : {
          format : ''
            {:%H
            %M}''
          tooltip-format : ''
            <big>{:%Y %B}</big>
            <tt><small>{calendar}</small></tt>''
        }
        backlight : {
          format : "{icon}"
          format-icons : ["î" "î“" "î‘" "î" "î" "î" "îŠ" "îˆ" "î›"]
        }
        cpu : {
          interval : 5
          format : "î‰¦  {}%"
        }
        battery : {
          states : {
            warning : 30
            critical : 15
          }
          format : "{icon} {capacity}%"
          format-charging : "ï–ƒ"
          format-plugged : "ï–ƒ"
          format-alt : "{icon} {capacity}%"
          format-icons : ["ï–‚" "ï•¹" "ï•º" "ï•»" "ï•¼" "ï•½" "ï•½" "ï•¾" "ï•¿" "ï–€" "ï–" "ï•¸"]
        }
        network : let
          nm-editor : "${pkgs.networkmanagerapplet}/bin/nm-connection-editor"
        in {
          format-wifi : "ó°¤¨"
          format-ethernet : "ó°ˆ€"
          format-alt : "ó±›‡"
          format-disconnected : "ó°¤­"
          tooltip-format : "{ipaddr}/{ifname} via {gwaddr} ({signalStrength}%)"
          on-click-right : "${nm-editor}"
        }
        pulseaudio : {
          scroll-step : 5
          tooltip : true
          tooltip-format : "{volume}"
          on-click : "${pkgs.killall}/bin/killall pavucontrol || ${pkgs.pavucontrol}/bin/pavucontrol"
          format : "{icon}"
          format-muted : "ó°Ÿ "
          format-icons : {
            default : ["ï€¦" "ï€§" "ï€¨ "]
          }
        }
      }
    }
  }
}
